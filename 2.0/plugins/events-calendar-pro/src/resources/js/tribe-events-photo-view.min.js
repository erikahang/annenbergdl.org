!function(a,b,c,d,e,f,g,h,i){c(b).ready(function(){function j(){c(".photo-loader").show(),c("#tribe-events-photo-events").addClass("photo-hidden")}function k(){c(".photo-loader").hide(),c("#tribe-events-photo-events").removeClass("photo-hidden").animate({opacity:"1"},{duration:600})}function l(a){t=a.width(),645>t?a.addClass("photo-two-col"):a.removeClass("photo-two-col")}function m(a){c().isotope?(a.imagesLoaded(function(){a.isotope({transformsEnabled:!1,containerStyle:{position:"relative",overflow:"visible"}},k())}),l(a),a.resize(function(){l(a),clearTimeout(p),p=setTimeout(function(){a.isotope("reLayout")},400)})):c("#tribe-events-photo-events").removeClass("photo-hidden").css("opacity","1")}function n(a){if("change_view"!=tribe_events_bar_action){if(a.preventDefault(),g.ajax_running)return;g.paged=1,g.view="photo",g.popping=!1,f.pre_ajax(function(){o()})}}function o(){if(!g.popping){g.ajax_running=!0,g.filter_cats&&(d.cur_url=c("#tribe-events-header").data("baseurl"));var k=c("#tribe-events-list-hash").val();if(g.params={action:"tribe_photo",tribe_paged:g.paged,tribe_event_display:g.view},g.url_params={action:"tribe_photo",tribe_paged:g.paged,tribe_event_display:g.view},d.default_permalinks&&(g.url_params.hasOwnProperty("post_type")||(g.url_params.post_type=i.events_post_type),g.url_params.hasOwnProperty("eventDisplay")||(g.url_params.eventDisplay=g.view)),k.length&&(g.params.hash=k),g.category&&(g.params.tribe_event_category=g.category),c(e).trigger("tribe_ev_serializeBar"),f.invalid_date_in_params(g.params))return void(g.ajax_running=!1);c("#tribe-events-header").tribe_spin(),j(),g.params=c.param(g.params),g.url_params=c.param(g.url_params),c(e).trigger("tribe_ev_collectParams"),g.pushstate=!1,g.do_string=!0}h.pushstate&&!g.filter_cats?(c(e).trigger("tribe_ev_ajaxStart").trigger("tribe_ev_photoView_AjaxStart"),c.post(TribePhoto.ajaxurl,g.params,function(a){if(g.initial_load=!1,f.enable_inputs("#tribe_events_filters_form","input, select"),a.success){g.ajax_running=!1,d.ajax_response={total_count:parseInt(a.total_count),view:a.view,max_pages:a.max_pages,tribe_paged:a.tribe_paged,timestamp:(new Date).getTime()},c("#tribe-events-list-hash").val(a.hash);var h=c.parseHTML(a.html);c("#tribe-events-content").replaceWith(h),c("#tribe-events-content").prev("#tribe-events-list-hash").remove(),c(".tribe-events-promo").next(".tribe-events-promo").remove(),0==a.max_pages&&c("#tribe-events-header").hide(),g.page_title=c("#tribe-events-header").data("title"),b.title=g.page_title,g.do_string&&history.pushState({tribe_params:g.params,tribe_url_params:g.url_params},g.page_title,d.cur_url+"?"+g.url_params),g.pushstate&&history.pushState({tribe_params:g.params,tribe_url_params:g.url_params},g.page_title,d.cur_url),m(c("#tribe-events-photo-events")),c(e).trigger("tribe_ev_ajaxSuccess").trigger("tribe_ev_photoView_AjaxSuccess")}})):a.location=g.url_params.length?d.cur_url+"?"+g.url_params:d.cur_url}var p,q=f.get_url_param("tribe_paged"),r=f.get_url_param("tribe_event_display"),s=c("#tribe-events-photo-events"),t=0;if(g.view="photo",q&&(g.paged=q),"past"==r&&(g.view="past"),m(s),h.pushstate&&!h.map_view()){var u="action=tribe_photo&tribe_paged="+g.paged;d.params.length&&(u=u+"&"+d.params),g.category&&(u=u+"&tribe_event_category="+g.category),history.replaceState({tribe_params:u,tribe_url_params:d.params},"",location.href),c(a).on("popstate",function(a){var b=a.originalEvent.state;b&&(g.do_string=!1,g.pushstate=!1,g.popping=!0,g.params=b.tribe_params,g.url_params=b.tribe_url_params,f.pre_ajax(function(){o()}),f.set_form(g.params))})}c("#tribe-events").on("click","li.tribe-events-nav-next a",function(a){a.preventDefault(),g.ajax_running||("past"==g.view?"1"==g.paged?g.view="photo":g.paged--:g.paged++,g.popping=!1,f.pre_ajax(function(){o()}))}).on("click","li.tribe-events-nav-previous a",function(a){a.preventDefault(),g.ajax_running||("photo"==g.view?"1"==g.paged?g.view="past":g.paged--:g.paged++,g.popping=!1,f.pre_ajax(function(){o()}))}),(h.no_bar()||h.live_ajax()&&h.pushstate)&&c("#tribe-bar-date").on("changeDate",function(a){h.reset_on()||n(a)}),c(e).on("tribe_ev_updatingRecurrence",function(){g.popping=!1}),c("#tribe-bar-form").on("submit",function(a){"change_view"!=tribe_events_bar_action&&n(a)}),f.snap("#tribe-events-content","#tribe-events-content","#tribe-events-footer .tribe-events-nav-previous a, #tribe-events-footer .tribe-events-nav-next a"),c(e).on("tribe_ev_runAjax",function(){o()})})}(window,document,jQuery,tribe_ev.data,tribe_ev.events,tribe_ev.fn,tribe_ev.state,tribe_ev.tests,tribe_js_config,tribe_debug);