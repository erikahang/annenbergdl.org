jQuery(document).ready(function(a){function b(){var b=a(".tribe-mini-calendar-wrapper");if(a(".tribe-mini-calendar-wrapper.layout-wide").length&&a(".tribe-mini-calendar-right").length){var c=a(".tribe-mini-calendar-right"),d=b.height(),e=c.outerHeight();e+=20,e>d?b.css("height",e+"px"):b.css("height","auto")}else a(".tribe-mini-calendar-wrapper.layout-wide").length&&b.css("height","auto")}function c(b){a(".tribe-mini-calendar .tribe-events-thismonth").removeClass("tribe-mini-calendar-today"),b.parents(".tribe-events-has-events").addClass("tribe-mini-calendar-today")}var d=a(".tribe-mini-calendar-wrapper").parent();b();var e=new Date,f=e.getDate().toString(),g=(e.getMonth()+1).toString(),h=e.getFullYear().toString(),i=h+"-"+(g[1]?g:"0"+g[0])+"-"+(f[1]?f:"0"+f[0]),j=i.slice(0,7);d.on("click",".tribe-mini-calendar-nav-link",function(c){c.preventDefault();var d=a(this),e=d.closest(".tribe-mini-calendar"),f=d.closest(".tribe-mini-calendar-wrapper"),g=d.attr("data-month"),h=g.slice(0,7);j==h&&(g=i);var k={action:"tribe-mini-cal",eventDate:g,count:e.data("count"),tax_query:e.data("tax-query"),nonce:e.data("nonce")};e.find(".tribe-mini-calendar-nav div > span").addClass("active").siblings("#ajax-loading-mini").show(),a.post(TribeMiniCalendar.ajaxurl,k,function(c){if(e.find(".tribe-mini-calendar-list-wrapper").remove(),c.success){var d=a.parseHTML(c.html);e.find(".tribe-mini-calendar-nav div > span").removeClass("active").siblings("#ajax-loading-mini").hide(),f.replaceWith(d),b()}})}).on("click",".tribe-mini-calendar-day-link",function(d){d.preventDefault();var e=a(this),f=e.attr("data-day"),g=e.text(),h=e.closest(".tribe-mini-calendar"),i=h.parent().siblings(".tribe-mini-calendar-list-wrapper");a("h2.tribe-mini-calendar-title").text(a("#tribe-mini-calendar-month-name").val()+" "+g+" Events"),c(e);var j={action:"tribe-mini-cal-day",eventDate:f,count:h.data("count"),tax_query:h.data("tax-query"),nonce:h.data("nonce")};h.find(".tribe-mini-calendar-nav div > span").addClass("active").siblings("#ajax-loading-mini").show(),a.post(TribeMiniCalendar.ajaxurl,j,function(c){if(c.success){var d="";d=a.isFunction(a.fn.parseHTML)?a.parseHTML(c.html):c.html,h.find(".tribe-mini-calendar-nav div > span").removeClass("active").siblings("#ajax-loading-mini").hide(),i.replaceWith(d),b()}})})});